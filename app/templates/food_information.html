{% extends 'base.html' %}
{% block title %}food_information{{ item.id }}{% endblock %}
{% block content %}

<div class="container">
  <div class="row">
      <div class="col-md-6">
          <img src="{{ item.image.url }}" alt="{{ item.name }}" class="image-container" >
      </div>
      <div class="col-md-6">
          <h2>{{ item.name }}</h2>
          <h3>消費期限：{{ item.deadline }}まで</h3>
          <h3>個数:{{ item.quantity }}個</h3>

          <button class="like-button" onclick="likeButtonClicked()">
            <i class="{% if is_liked %}fas{% else %}far{% endif %} fa-heart" id="heart-icon"></i>
            <span class="like-count">{{ item.like_count }}</span>
          </button>

          <button class="like-button"　onclick="showCommentField()">
            <i class="far fa-comment-alt" id="heart-icon"></i>
            <span>コメント</span>
          </button>

          <button class="comment-button" onclick="showCommentField()">コメントする</button>
          <button class="myclass">ほしい！！</button>

          <div id="comment-field" style="display: none;">
            <textarea id="comment-textarea" rows="4" cols="50"></textarea>
            <button onclick="submitComment()">送信</button>
          </div>

　　　　　

          <div id="comment-field" style="display: none;">
            <textarea id="comment-textarea" rows="4" cols="50"></textarea>
            <button onclick="submitComment()">送信</button>
          </div>
      </div>
  </div>
</div>





<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  function likeButtonClicked() {
  var itemId = "{{ item.id }}";

  $.ajax({
    type: "POST",
    url: "/like_item/" + itemId + "/",
    data: {
      item_id: itemId,
      csrfmiddlewaretoken: "{{ csrf_token }}",
    },
    success: function(response) {
        if (response.is_liked) {
          $("#heart-icon").removeClass("far").addClass("fas");
          $(".like-count").text(response.like_count);
        } else {
          $("#heart-icon").removeClass("fas").addClass("far");
          $(".like-count").text(response.like_count);
        }
      },
      error: function(xhr, status, error) {
        console.log(error);
      }
  });
}


function showCommentField() {
  var commentField = document.getElementById("comment-field");
  commentField.style.display = "block";
}

function submitComment() {
  var commentTextarea = document.getElementById("comment-textarea");
  var commentText = commentTextarea.value;

  // コメントを送信するための処理を追加
  // ここでAjaxリクエストを使用してサーバにコメントを送信するなどの処理を行います
}
</script>

{% endblock %}